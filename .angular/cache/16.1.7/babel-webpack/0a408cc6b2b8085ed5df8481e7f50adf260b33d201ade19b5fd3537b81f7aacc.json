{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-image-compress\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../sharebutton/sharebutton.component\";\nimport * as i5 from \"../settings/settings.component\";\nfunction DropComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5);\n    i0.ɵɵelement(2, \"app-settings\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 6)(4, \"div\", 7)(5, \"h5\", 8)(6, \"span\");\n    i0.ɵɵtext(7, \"Giri\\u015F G\\u00F6r\\u00FCnt\\u00FCs\\u00FC \");\n    i0.ɵɵelementStart(8, \"small\", 9);\n    i0.ɵɵtext(9, \"(orijinal g\\u00F6r\\u00FCnt\\u00FC)\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"a\", 10);\n    i0.ɵɵtext(11, \"\\u0130ndir\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 11)(13, \"div\", 4)(14, \"div\", 12)(15, \"div\", 13);\n    i0.ɵɵelement(16, \"img\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 15)(18, \"dl\", 4)(19, \"dt\", 16);\n    i0.ɵɵtext(20, \"son de\\u011Fi\\u015Fiklik:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"dd\", 17);\n    i0.ɵɵelementStart(22, \"dt\", 16);\n    i0.ɵɵtext(23, \"son de\\u011Fi\\u015Fiklik tarihi:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"dd\", 18);\n    i0.ɵɵelement(25, \"td\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"dt\", 16);\n    i0.ɵɵtext(27, \"isim:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"dd\", 19);\n    i0.ɵɵelementStart(29, \"dt\", 16);\n    i0.ɵɵtext(30, \"t\\u00FCr\\u00FC:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(31, \"dd\", 20);\n    i0.ɵɵelementStart(32, \"dt\", 16);\n    i0.ɵɵtext(33, \"boyut:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"dd\", 21);\n    i0.ɵɵtext(35);\n    i0.ɵɵpipe(36, \"number\");\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵelementStart(37, \"div\", 22)(38, \"h5\", 8)(39, \"span\");\n    i0.ɵɵtext(40, \"\\u00C7\\u0131kt\\u0131 G\\u00F6r\\u00FCnt\\u00FCs\\u00FC \");\n    i0.ɵɵelementStart(41, \"small\", 9);\n    i0.ɵɵtext(42, \"(s\\u0131k\\u0131\\u015Ft\\u0131r\\u0131lm\\u0131\\u015F g\\u00F6r\\u00FCnt\\u00FC)\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(43, \"app-sharebutton\");\n    i0.ɵɵelementStart(44, \"a\", 23);\n    i0.ɵɵtext(45, \"\\u0130ndir\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"div\", 11)(47, \"div\", 4)(48, \"div\", 12)(49, \"div\", 24);\n    i0.ɵɵelement(50, \"img\", 25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(51, \"div\", 15)(52, \"dl\", 4)(53, \"dt\", 16);\n    i0.ɵɵtext(54, \"son de\\u011Fi\\u015Fiklik:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(55, \"dd\", 26);\n    i0.ɵɵelementStart(56, \"dt\", 16);\n    i0.ɵɵtext(57, \"son de\\u011Fi\\u015Fiklik tarihi:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"dd\", 27);\n    i0.ɵɵelement(59, \"td\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(60, \"dt\", 16);\n    i0.ɵɵtext(61, \"isim:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(62, \"dd\", 29);\n    i0.ɵɵelementStart(63, \"dt\", 16);\n    i0.ɵɵtext(64, \"t\\u00FCr\\u00FC:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(65, \"dd\", 30);\n    i0.ɵɵelementStart(66, \"dt\", 16);\n    i0.ɵɵtext(67, \"boyut:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(68, \"dd\", 31);\n    i0.ɵɵtext(69);\n    i0.ɵɵpipe(70, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(71, \"dt\", 16);\n    i0.ɵɵtext(72, \"s\\u0131k\\u0131\\u015Ft\\u0131rma s\\u00FCresi:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(73, \"dd\", 32);\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵelementStart(74, \"body\")(75, \"div\", 22)(76, \"h4\", 33);\n    i0.ɵɵtext(77, \"G\\u00F6r\\u00FCnt\\u00FCleri Kar\\u015F\\u0131la\\u015Ft\\u0131rma\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(78, \"div\", 11);\n    i0.ɵɵelement(79, \"div\", 34);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"src\", ctx_r0.localUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(19);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(36, 5, ctx_r0.sizeOfOriginalImage, \"1.2-2\"), \" MB \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"href\", ctx_r0.localCompressedURl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"src\", ctx_r0.localCompressedURl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(19);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(70, 8, ctx_r0.sizeOFCompressedImage, \"1.2-2\"), \" MB \");\n  }\n}\n//declare const changeBeforeAfter: any;\nexport let DropComponent = /*#__PURE__*/(() => {\n  class DropComponent {\n    constructor(imageCompress, toastrService) {\n      this.imageCompress = imageCompress;\n      this.toastrService = toastrService;\n    }\n    selectFile(event) {\n      var fileName;\n      this.file = event.target.files[0];\n      fileName = this.file['name'];\n      if (event.target.files && event.target.files[0] && event.target.files[0].type.startsWith('image/')) {\n        this.isHidden = true;\n        var reader = new FileReader();\n        reader.onload = event => {\n          this.localUrl = event.target.result;\n          //console.log(this.localCompressedURl);\n          this.compressFile(this.localUrl, fileName);\n        };\n        reader.readAsDataURL(event.target.files[0]);\n      } else this.toastrService.error('Lütfen geçerli bir dosya seçiniz');\n    }\n    compressFile(image, fileName) {\n      var inputImage = document.getElementById(\"inputImage\");\n      var outputImage = document.getElementById(\"outputImage\");\n      //console.log(this.quality)\n      var orientation = -1;\n      this.sizeOfOriginalImage = this.imageCompress.byteCount(image) / (1024 * 1024);\n      //görüntü boyutu: satır*sütun*bpp\n      //bpp: görüntü boyutu / satır*sütun\n      var inputWidth = inputImage?.clientWidth;\n      var inputHeight = inputImage?.clientHeight;\n      var outputSize = this.sizeOfOriginalImage * 1024 * 1024;\n      //calculatePSNRandBPP(inputWidth,inputHeight,outputSize)\n      console.warn('Size in bytes is now:', this.sizeOfOriginalImage * 1024 * 1024);\n      var quality = document.getElementById('inputQuality');\n      var ourQuality = quality.selectedIndex;\n      var newquality;\n      this.myquality = newquality;\n      quality?.addEventListener('change', function () {\n        var selectedQuality = quality.selectedIndex * 10;\n        // newquality = selectedQuality\n        // console.warn(selectedQuality);\n        // console.warn(newquality)\n        ourQuality = selectedQuality;\n      });\n      this.imageCompress.compressFile(image, orientation, 50, 60).then(result => {\n        console.log(this.myquality);\n        this.imgResultAfterCompress = result;\n        this.localCompressedURl = result;\n        this.sizeOFCompressedImage = this.imageCompress.byteCount(result) / (1024 * 1024);\n        console.warn('Size in bytes after compression:', this.sizeOFCompressedImage * 1024 * 1024);\n        // create file from byte\n        const imageName = fileName;\n        // call method that creates a blob from dataUri\n        const imageBlob = this.dataURItoBlob(this.imgResultAfterCompress.split(',')[1]);\n        //imageFile created below is the new compressed file which can be send to API in form data\n        const imageFile = new File([result], imageName, {\n          type: 'image/jpeg'\n        });\n      });\n    }\n    dataURItoBlob(dataURI) {\n      const byteString = window.atob(dataURI);\n      const arrayBuffer = new ArrayBuffer(byteString.length);\n      const int8Array = new Uint8Array(arrayBuffer);\n      for (let i = 0; i < byteString.length; i++) {\n        int8Array[i] = byteString.charCodeAt(i);\n      }\n      const blob = new Blob([int8Array], {\n        type: 'image/jpeg'\n      });\n      console.log(blob);\n      return blob;\n    }\n    ngOnInit() {\n      dropdrag();\n      //this.getResultFileInformation(this.resultFileOutputs);\n      //changeBeforeAfter();\n      //this.getResultFileInformation(this.resultFileOutputs);\n      //this.toastrService.success(\"Hoşgeldiniz\")\n      this.toastrService.info('Görüntülerinizi çevrimiçi ve ücretsiz olarak sıkıştırabilirsiniz. Bu sayede depolama alanınızda yer açabilirsiniz.', 'Hakkında');\n    }\n  }\n  DropComponent.ɵfac = function DropComponent_Factory(t) {\n    return new (t || DropComponent)(i0.ɵɵdirectiveInject(i1.NgxImageCompressService), i0.ɵɵdirectiveInject(i2.ToastrService));\n  };\n  DropComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DropComponent,\n    selectors: [[\"app-drop\"]],\n    decls: 8,\n    vars: 1,\n    consts: [[1, \"drop-zone\"], [1, \"drop-zone__prompt\"], [\"type\", \"file\", \"name\", \"myFile\", \"accept\", \".jpg,.png,.jpeg\", \"id\", \"image-input\", 1, \"drop-zone__input\", 3, \"change\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-lg-4\", \"mb-4\"], [1, \"col-lg-8\", \"mb-4\"], [1, \"card\", \"mb-4\"], [1, \"card-header\", \"d-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"text-secondary\"], [\"download\", \"after.jpg\", \"href\", \"localUrl\", \"title\", \"y\\u00FCklenen g\\u00F6r\\u00FCnt\\u00FCy\\u00FC indir\", \"id\", \"downloadInputImage\", 1, \"btn\", \"btn-sm\", \"btn-blocks\", \"btn-outline-primary\"], [1, \"card-body\"], [1, \"col-md-4\", \"d-flex\", \"mb-3\"], [\"v-if\", \"inputURL\", 1, \"w-100\", \"text-center\"], [\"alt\", \"image\", \"id\", \"inputImage\", 1, \"mw-100\", 3, \"src\"], [1, \"col-md-8\"], [1, \"col-5\"], [\"id\", \"inputLastModified\", 1, \"col-7\"], [\"id\", \"inputLastModifiedDate\", 1, \"col-7\"], [\"id\", \"inputName\", 1, \"col-7\"], [\"id\", \"inputType\", 1, \"col-7\"], [\"id\", \"inputSize\", 1, \"col-7\"], [1, \"card\"], [\"download\", \"before.jpg\", \"title\", \"s\\u0131k\\u0131\\u015Ft\\u0131r\\u0131lm\\u0131\\u015F g\\u00F6r\\u00FCnt\\u00FCy\\u00FC indir\", \"id\", \"downloadOutputImage\", 1, \"btn\", \"btn-sm\", \"btn-blocks\", \"btn-outline-primary\", 3, \"href\"], [\"v-if\", \"outputURL\", 1, \"w-100\", \"text-center\"], [\"alt\", \"picture.jpg\", \"id\", \"outputImage\", 1, \"mw-100\", 3, \"src\"], [\"id\", \"outputLastModified\", 1, \"col-7\"], [1, \"col-7\"], [\"id\", \"outputLastModifiedDate\"], [\"id\", \"outputName\", 1, \"col-7\"], [\"id\", \"outputType\", 1, \"col-7\"], [\"id\", \"outputSize\", 1, \"col-7\"], [\"id\", \"encodingTime\", 1, \"col-7\"], [1, \"card-header\"], [1, \"vci-container\"]],\n    template: function DropComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"span\", 1);\n        i0.ɵɵtext(3, \"G\\u00F6r\\u00FCnt\\u00FCy\\u00FC buraya s\\u00FCr\\u00FCkleyin veya y\\u00FCklemek i\\u00E7in t\\u0131klay\\u0131n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"input\", 2);\n        i0.ɵɵlistener(\"change\", function DropComponent_Template_input_change_4_listener($event) {\n          return ctx.selectFile($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵtemplate(6, DropComponent_div_6_Template, 80, 11, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"br\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.isHidden);\n      }\n    },\n    dependencies: [i3.NgIf, i4.SharebuttonComponent, i5.SettingsComponent, i3.DecimalPipe],\n    styles: [\".drop-zone[_ngcontent-%COMP%]{max-width:1295px;height:200px;padding:25px;display:flex;align-items:center;justify-content:center;text-align:center;font-family:Quicksand,sans-serif;font-weight:500;font-size:20px;cursor:pointer;color:#ccc;border:4px dashed #009578;border-radius:10px}.drop-zone--over[_ngcontent-%COMP%]{border-style:solid}.drop-zone__input[_ngcontent-%COMP%]{display:none}.drop-zone__thumb[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:10px;overflow:hidden;background-color:#ccc;background-size:cover;position:relative}.drop-zone__thumb[_ngcontent-%COMP%]:after{content:attr(data-label);position:absolute;bottom:0;left:0;width:100%;padding:5px 0;color:#fff;background:rgba(0,0,0,.75);font-size:14px;text-align:center}img-comparison-slider[_ngcontent-%COMP%]{--divider-width: 1px;--divider-color: #e9e9dbe0;--handle-opacity: .4}.slider-with-custom-relative-handle[_ngcontent-%COMP%]{--handle-size: clamp(10px, 8.5vw, 100px);--handle-opacity: .4;--handle-opacity-active: .5}.custom-relative-handle[_ngcontent-%COMP%]{width:var(--handle-size);height:var(--handle-size)}.vci-container[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;width:100%;overflow:hidden}\"]\n  });\n  return DropComponent;\n})();\nfunction calculatePSNRandBPP(inputWidth, inputHeight, outputSize) {\n  throw new Error('Function not implemented.');\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}